from math import gcd

class Solution:
    def canTraverseAllPairs(self, nums) -> bool:
        def buildGraph(nums):
            graph = {i: [] for i in range(len(nums))}
            for i in range(len(nums)):
                for j in range(i+1, len(nums)):
                    if gcd(nums[i], nums[j]) > 1:
                        graph[i].append(j)
                        graph[j].append(i)
            return graph

        def dfs(node, visited, graph):
            visited.add(node)
            for neighbor in graph[node]:
                if neighbor not in visited:
                    dfs(neighbor, visited, graph)

        graph = buildGraph(nums)
        for i in range(len(nums)):
            visited = set()
            dfs(i, visited, graph)
            if len(visited) != len(nums):
                return False

        return True

nums = [924,880,84,980,455,715,22,165,105,560,462,385,226,1000,546,924,440,266,990,420,385,90,638,378,546,858,462,385,210,825,715,180,585,798,70,420,90,899,192,924,560,735,330,315,210,385,225,819,105,932,572,99,748,585,315,572,990,858,693,924,840,420,364,630,451,385,770,156,440,980,231,312,520,390,168,770,924,546,990,660,840,231,770,429,105,880,858,900,728,858,765,462,990,936,336,770,910,546,429,110,660,595,84,33,130,840,616,126,770,689,330,819,880,630,330,385,210,396,495,440,924,770,770,870,585,312,546,858,910,570,390,924,630,770,897,325,945,420,858,315,364,924,780,616,152,924,130,910,240,294,330,916,966,924,990,840,546,693,416,966,770,245,429,260,165,858,336,910,5,770,880,308,330,420,910,810,210,630,525,105,840,338,462,280,462,470,440,385,910,330,462,770,660,990,546,715,225,741,630,780,210,770,910,165,966,375,385,880,798,130,770,845,520,990,770,273,572,165,598,825,781,585,378,858,693,660,910,546,770,154,858,572,324,182,495,385,858,644,714,390,572,852,612,780,702,858,924,225,448,66,858,539,990,990,660,429,210,462,273,450,840,420,759,220,165,264,924,300,273,924,910,990,420,990,75,770,728,420,350,770,945,306,370,966,840,550,275,618,572,630,945,165,275,484,231,75,165,990,693,990,420,105,660,420,728,507,780,990,130,180,330,110,390,330,770,420,645,224,308,420,468,630,198,910,135,91,990,660,870,462,910,900,78,770,910,780,840,840,770,455,560,240,385,350,462,182,420,456,495,315,390,693,945,770,660,606,260,453,420,420,105,143,462,595,539,195,715,858,26,546,420,462,630,858,130,770,858,130,954,220,913,462,330,825,455,242,910,770,546,385,176,220,663,399]
print(Solution().canTraverseAllPairs(nums))  # Output: True
